import{f as C,Q as _,g as V,h as Q}from"./QSpace-24f21fcb.js";import{a9 as x,P as i,aa as q,ab as D,e as p,p as g,k as a,w as n,ac as m,x as d,m as f,ad as b,v as k,f as v,F as I,y as N,ae as A,Q as S,l as j,g as s}from"./app-ef0de7b8.js";import{Q as y,a as T,b as w,c as P}from"./QTable-331a9308.js";const U={data(){return{data:[],hero:null,oke:!1,columns:[{name:"nama",required:!0,label:"Nama",align:"left",field:"nama",sortable:!0},{name:"pasangan",required:!0,label:"Pasangan",align:"left",field:"pasangan",sortable:!0},{name:"link",required:!0,label:"Link",align:"left",field:"link",sortable:!1},{name:"aksi",required:!0,label:"Aksi",align:"left",field:"aksi",sortable:!1}],showAddDialog:!1,newItem:{nama:"",pasangan:""},pagination:{},filter:null}},methods:{submit(){this.hero=="inashol09"&&(this.oke=!0)},saveNewItem(){i.show();let l={key:"924rjnjefj9e9re###*w",...this.newItem};axios.post("/api/undangan",l).then(e=>{this.data.unshift(e.data),this.newItem={nama:"",pasangan:""}}).finally(()=>{this.showAddDialog=!1,i.hide()})},copyToClipboard(l){const e=document.createElement("textarea");e.value=l,e.style.position="fixed",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},copyLink(l){q.create({message:l.nama+" link berhasil di copy !",position:"top",color:"green"});let e="https://shonayah.com/"+l.link;this.copyToClipboard(e)},fill(){i.show(),axios.get("/api/undangan").then(l=>{this.data=l.data}).finally(()=>{i.hide()})},destroy(l){i.show();let e={key:"924rjnjefj9e9re###*w",id:l.id};axios.post("/api/hapus-undangan",e).then(()=>{const c=l.id;this.data=this.data.filter(h=>h.id!==c)}).finally(()=>{i.hide()})},openDelete(l){D.create({dark:!0,title:"Confirm",message:`Apakah anda yakin menghapus undangan : ${l.nama} ?`,cancel:!0,persistent:!0}).onOk(()=>{this.destroy(l)}).onOk(()=>{}).onCancel(()=>{}).onDismiss(()=>{})}},mounted(){this.fill()}},B={key:0},L=s("div",null,"Nama",-1),F=s("div",null,"Pasangan (optional)",-1),O={class:"row q-mt-md"};function R(l,e,c,h,o,r){return p(),g("div",null,[o.oke?k("",!0):(p(),g("div",B,[a(y,{onSubmit:b(r.submit,["prevent"])},{default:n(()=>[a(m,{rules:[t=>l.val!==null&&l.val!==""||"Required"],label:"hero",dense:"",outlined:"",modelValue:o.hero,"onUpdate:modelValue":e[0]||(e[0]=t=>o.hero=t),class:"q-mb-sm"},null,8,["rules","modelValue"]),a(d,{type:"submit",color:"orange"},{default:n(()=>[f("submit")]),_:1})]),_:1},8,["onSubmit"])])),o.oke?(p(),v(_,{key:1},{default:n(()=>[a(T,{title:"Undangan Online",rows:o.data,columns:o.columns,pagination:o.pagination,"rows-per-page-options":[10,20,50],filter:o.filter},{"top-right":n(t=>[a(m,{outlined:"",dense:"",debounce:"300",modelValue:o.filter,"onUpdate:modelValue":e[1]||(e[1]=u=>o.filter=u),placeholder:"Search",class:"q-mr-sm"},{append:n(()=>[a(I,{name:"search"})]),_:1},8,["modelValue"]),a(d,{class:N(l.$q.screen.xs?"q-mt-sm":""),label:"Add",color:"primary",onClick:e[2]||(e[2]=u=>o.showAddDialog=!0)},null,8,["class"])]),"body-cell-link":n(t=>[a(w,{props:t},{default:n(()=>[a(d,{color:"orange",onClick:u=>r.copyLink(t.row)},{default:n(()=>[f("copy link")]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),"body-cell-aksi":n(t=>[a(w,{props:t},{default:n(()=>[a(d,{onClick:u=>r.openDelete(t.row),color:"red",icon:"delete",flat:"",round:"",size:"sm"},{default:n(()=>[a(P,{class:"bg-accent"},{default:n(()=>[f("hapus")]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination","filter"]),a(A,{modelValue:o.showAddDialog,"onUpdate:modelValue":e[6]||(e[6]=t=>o.showAddDialog=t),persistent:""},{default:n(()=>[a(S,{style:{width:"800px"}},{default:n(()=>[a(j,null,{default:n(()=>[a(y,{onSubmit:b(r.saveNewItem,["prevent"])},{default:n(()=>[s("div",null,[s("div",null,[L,a(m,{modelValue:o.newItem.nama,"onUpdate:modelValue":e[3]||(e[3]=t=>o.newItem.nama=t),dense:"",outlined:"",rules:[t=>!!t||"Nama is required"]},null,8,["modelValue","rules"])]),s("div",null,[F,a(m,{modelValue:o.newItem.pasangan,"onUpdate:modelValue":e[4]||(e[4]=t=>o.newItem.pasangan=t),dense:"",outlined:""},null,8,["modelValue"])]),s("div",O,[a(C),a(d,{label:"Cancel",color:"secondary",onClick:e[5]||(e[5]=t=>o.showAddDialog=!1),class:"q-mr-sm"}),a(d,{label:"Save",color:"primary",type:"submit"})])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):k("",!0)])}const z=x(U,[["render",R]]),E={class:"row justify-center",style:{"padding-bottom":"100px"}},M={id:"home",class:"col-12 col-md-10 q-pa-md"},K={__name:"Dashboard",setup(l){return(e,c)=>(p(),v(Q,{view:"lhr lpR lFr"},{default:n(()=>[a(V,null,{default:n(()=>[a(_,null,{default:n(()=>[s("div",E,[s("div",M,[a(z)])])]),_:1})]),_:1})]),_:1}))}};export{K as default};
